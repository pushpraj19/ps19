<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productivity Master</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --success-color: #4cc9f0;
            --light-bg: #f8f9fa;
            --dark-text: #212529;
            --sidebar-width: 250px;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-bg);
            color: var(--dark-text);
        }
        
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: var(--sidebar-width);
            background-color: var(--primary-color);
            color: white;
            padding-top: 20px;
            z-index: 1000;
            overflow-y: auto;
            transition: all 0.3s;
        }
        
        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 20px;
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .sidebar-menu li {
            margin-bottom: 5px;
        }
        
        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .sidebar-menu a:hover, .sidebar-menu a.active {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .sidebar-menu i {
            margin-right: 10px;
            font-size: 18px;
        }
        
        .main-content {
            margin-left: var(--sidebar-width);
            padding: 20px;
            transition: all 0.3s;
        }
        
        .navbar {
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            transition: transform 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            background-color: var(--primary-color);
            color: white;
            border-radius: 10px 10px 0 0 !important;
            padding: 12px 20px;
        }
        
        .task-item, .event-item, .habit-item, .goal-item, .note-item, .journal-item {
            padding: 12px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .task-item:last-child, .event-item:last-child, .habit-item:last-child, 
        .goal-item:last-child, .note-item:last-child, .journal-item:last-child {
            border-bottom: none;
        }
        
        .priority-high {
            border-left: 4px solid #f72585;
        }
        
        .priority-medium {
            border-left: 4px solid #ffbe0b;
        }
        
        .priority-low {
            border-left: 4px solid #4cc9f0;
        }
        
        .points-badge {
            background-color: var(--success-color);
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .timer-display {
            font-size: 3rem;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
        }
        
        .quote-card, .tip-card, .challenge-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        
        .streak-counter {
            background-color: #ffbe0b;
            color: white;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
        }
        
        .profile-header {
            background-color: var(--primary-color);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .resource-card {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
        }
        
        .resource-icon {
            font-size: 24px;
            margin-right: 15px;
            color: var(--primary-color);
        }
        
        .random-task {
            background-color: #ffbe0b;
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.25rem rgba(67, 97, 238, 0.25);
        }
        
        .completed-task {
            text-decoration: line-through;
            opacity: 0.7;
        }
        
        .modal-content {
            border-radius: 10px;
        }
        
        .modal-header {
            background-color: var(--primary-color);
            color: white;
            border-radius: 10px 10px 0 0;
        }
        
        .modal-header .btn-close {
            filter: brightness(0) invert(1);
        }
        
        .toggle-sidebar {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 12px;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .toggle-sidebar {
                display: block;
            }
        }
    </style>
</head>
<body>
    <!-- Login/Register Screen -->
    <div id="authScreen" class="container d-flex justify-content-center align-items-center min-vh-100">
        <div class="card" style="width: 100%; max-width: 450px;">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">Productivity Master</h4>
            </div>
            <div class="card-body">
                <ul class="nav nav-tabs mb-3" id="authTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab">Login</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" role="tab">Register</button>
                    </li>
                </ul>
                <div class="tab-content" id="authTabsContent">
                    <div class="tab-pane fade show active" id="login" role="tabpanel">
                        <form id="loginForm">
                            <div class="mb-3">
                                <label for="loginEmail" class="form-label">Email</label>
                                <input type="email" class="form-control" id="loginEmail" required>
                            </div>
                            <div class="mb-3">
                                <label for="loginPassword" class="form-label">Password</label>
                                <input type="password" class="form-control" id="loginPassword" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Login</button>
                        </form>
                    </div>
                    <div class="tab-pane fade" id="register" role="tabpanel">
                        <form id="registerForm">
                            <div class="mb-3">
                                <label for="registerName" class="form-label">Name</label>
                                <input type="text" class="form-control" id="registerName" required>
                            </div>
                            <div class="mb-3">
                                <label for="registerEmail" class="form-label">Email</label>
                                <input type="email" class="form-control" id="registerEmail" required>
                            </div>
                            <div class="mb-3">
                                <label for="registerPassword" class="form-label">Password</label>
                                <input type="password" class="form-control" id="registerPassword" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Register</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="appScreen" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h4>Productivity Master</h4>
                <div class="d-flex align-items-center mt-3">
                    <img src="https://picsum.photos/seed/avatar123/80/80.jpg" alt="Avatar" class="profile-avatar me-3" id="sidebarAvatar">
                    <div>
                        <div id="sidebarUserName">User Name</div>
                        <small id="sidebarUserPoints">0 points</small>
                    </div>
                </div>
            </div>
            <ul class="sidebar-menu">
                <li><a href="#" class="active" data-page="dashboard"><i class="bi bi-speedometer2"></i> Dashboard</a></li>
                <li><a href="#" data-page="tasks"><i class="bi bi-list-task"></i> Tasks</a></li>
                <li><a href="#" data-page="calendar"><i class="bi bi-calendar3"></i> Calendar</a></li>
                <li><a href="#" data-page="timer"><i class="bi bi-stopwatch"></i> Timer</a></li>
                <li><a href="#" data-page="habits"><i class="bi bi-check-circle"></i> Habits</a></li>
                <li><a href="#" data-page="goals"><i class="bi bi-bullseye"></i> Goals</a></li>
                <li><a href="#" data-page="notes"><i class="bi bi-journal-text"></i> Notes</a></li>
                <li><a href="#" data-page="journal"><i class="bi bi-book"></i> Journal</a></li>
                <li><a href="#" data-page="motivation"><i class="bi bi-lightbulb"></i> Motivation</a></li>
                <li><a href="#" data-page="resources"><i class="bi bi-collection"></i> Resources</a></li>
                <li><a href="#" data-page="profile"><i class="bi bi-person-circle"></i> Profile</a></li>
                <li><a href="#" id="logoutBtn"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
            </ul>
        </div>

        <!-- Toggle Sidebar Button (Mobile) -->
        <button class="toggle-sidebar" id="toggleSidebar">
            <i class="bi bi-list"></i>
        </button>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Navbar -->
            <nav class="navbar">
                <div class="container-fluid">
                    <span class="navbar-brand mb-0 h1" id="pageTitle">Dashboard</span>
                    <div class="d-flex align-items-center">
                        <div class="points-badge me-3" id="navbarPoints">0</div>
                        <button class="btn btn-sm btn-outline-secondary" id="randomTaskBtn">
                            <i class="bi bi-shuffle"></i> Random Task
                        </button>
                    </div>
                </div>
            </nav>

            <!-- Dashboard Page -->
            <div id="dashboardPage" class="page">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Today's Tasks</h5>
                            </div>
                            <div class="card-body">
                                <div id="todayTasksList">
                                    <!-- Tasks will be loaded here -->
                                </div>
                                <button class="btn btn-sm btn-outline-primary w-100 mt-2" id="viewAllTasksBtn">View All Tasks</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Today's Events</h5>
                            </div>
                            <div class="card-body">
                                <div id="todayEventsList">
                                    <!-- Events will be loaded here -->
                                </div>
                                <button class="btn btn-sm btn-outline-primary w-100 mt-2" id="viewAllEventsBtn">View All Events</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="streak-counter">
                            <h4>Current Streak</h4>
                            <div class="display-4" id="currentStreak">0</div>
                            <p>days</p>
                        </div>
                        <div class="quote-card">
                            <h5>Daily Quote</h5>
                            <p id="dailyQuote">"The secret of getting ahead is getting started." - Mark Twain</p>
                            <button class="btn btn-sm btn-outline-primary" id="newQuoteBtn">New Quote</button>
                        </div>
                    </div>
                </div>
                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Daily Challenge</h5>
                            </div>
                            <div class="card-body">
                                <div id="dailyChallenge">
                                    <!-- Challenge will be loaded here -->
                                </div>
                                <button class="btn btn-primary w-100 mt-3" id="acceptChallengeBtn">Accept Challenge</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Productivity Tip</h5>
                            </div>
                            <div class="card-body">
                                <p id="productivityTip">Break your tasks into smaller, manageable parts to make progress easier.</p>
                                <button class="btn btn-sm btn-outline-primary" id="newTipBtn">New Tip</button>
                            </div>
                        </div>
                        <div class="random-task mt-3" id="randomTaskContainer" style="display: none;">
                            <div id="randomTaskText"></div>
                            <button class="btn btn-sm btn-light mt-2" id="completeRandomTaskBtn">Complete</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tasks Page -->
            <div id="tasksPage" class="page" style="display: none;">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Tasks</h5>
                        <button class="btn btn-sm btn-light" data-bs-toggle="modal" data-bs-target="#addTaskModal">
                            <i class="bi bi-plus-circle"></i> Add Task
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="tasksList">
                            <!-- Tasks will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calendar Page -->
            <div id="calendarPage" class="page" style="display: none;">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Calendar Events</h5>
                        <button class="btn btn-sm btn-light" data-bs-toggle="modal" data-bs-target="#addEventModal">
                            <i class="bi bi-plus-circle"></i> Add Event
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="eventsList">
                            <!-- Events will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timer Page -->
            <div id="timerPage" class="page" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Focus Timer</h5>
                    </div>
                    <div class="card-body text-center">
                        <div class="timer-display" id="timerDisplay">25:00</div>
                        <div class="mb-4">
                            <button class="btn btn-primary me-2" id="startTimerBtn">Start</button>
                            <button class="btn btn-secondary me-2" id="pauseTimerBtn">Pause</button>
                            <button class="btn btn-danger" id="resetTimerBtn">Reset</button>
                        </div>
                        <div class="mb-3">
                            <label for="timerDuration" class="form-label">Duration (minutes):</label>
                            <input type="number" class="form-control d-inline-block w-auto" id="timerDuration" value="25" min="1" max="60">
                        </div>
                        <div class="mb-3">
                            <label for="timerTask" class="form-label">Select Task:</label>
                            <select class="form-select" id="timerTask">
                                <option value="">No specific task</option>
                            </select>
                        </div>
                        <div id="timerSessionsList">
                            <!-- Timer sessions will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Habits Page -->
            <div id="habitsPage" class="page" style="display: none;">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Habits</h5>
                        <button class="btn btn-sm btn-light" data-bs-toggle="modal" data-bs-target="#addHabitModal">
                            <i class="bi bi-plus-circle"></i> Add Habit
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="habitsList">
                            <!-- Habits will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Goals Page -->
            <div id="goalsPage" class="page" style="display: none;">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Goals</h5>
                        <button class="btn btn-sm btn-light" data-bs-toggle="modal" data-bs-target="#addGoalModal">
                            <i class="bi bi-plus-circle"></i> Add Goal
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="goalsList">
                            <!-- Goals will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notes Page -->
            <div id="notesPage" class="page" style="display: none;">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Notes</h5>
                        <button class="btn btn-sm btn-light" data-bs-toggle="modal" data-bs-target="#addNoteModal">
                            <i class="bi bi-plus-circle"></i> Add Note
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="notesList">
                            <!-- Notes will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Journal Page -->
            <div id="journalPage" class="page" style="display: none;">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Journal</h5>
                        <button class="btn btn-sm btn-light" data-bs-toggle="modal" data-bs-target="#addJournalModal">
                            <i class="bi bi-plus-circle"></i> Add Entry
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="journalList">
                            <!-- Journal entries will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Motivation Page -->
            <div id="motivationPage" class="page" style="display: none;">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Motivational Quotes</h5>
                            </div>
                            <div class="card-body">
                                <div id="motivationQuotesList">
                                    <!-- Quotes will be loaded here -->
                                </div>
                                <button class="btn btn-primary w-100 mt-3" id="refreshQuotesBtn">Refresh Quotes</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Productivity Tips</h5>
                            </div>
                            <div class="card-body">
                                <div id="productivityTipsList">
                                    <!-- Tips will be loaded here -->
                                </div>
                                <button class="btn btn-primary w-100 mt-3" id="refreshTipsBtn">Refresh Tips</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-4">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Daily Challenges</h5>
                            </div>
                            <div class="card-body">
                                <div id="dailyChallengesList">
                                    <!-- Challenges will be loaded here -->
                                </div>
                                <button class="btn btn-primary w-100 mt-3" id="refreshChallengesBtn">Refresh Challenges</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Your Progress</h5>
                            </div>
                            <div class="card-body">
                                <div class="streak-counter">
                                    <h4>Current Streak</h4>
                                    <div class="display-4" id="motivationCurrentStreak">0</div>
                                    <p>days</p>
                                </div>
                                <div class="mt-3">
                                    <h5>Total Challenges Completed: <span id="totalChallenges">0</span></h5>
                                    <h5>Longest Streak: <span id="longestStreak">0</span> days</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Accepted Challenges</h5>
                            </div>
                            <div class="card-body">
                                <div id="acceptedChallengesList">
                                    <!-- Accepted challenges will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Resources Page -->
            <div id="resourcesPage" class="page" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Productivity Resources</h5>
                    </div>
                    <div class="card-body">
                        <div id="resourcesList">
                            <!-- Resources will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Page -->
            <div id="profilePage" class="page" style="display: none;">
                <div class="profile-header">
                    <div class="row align-items-center">
                        <div class="col-md-3 text-center">
                            <img src="https://picsum.photos/seed/avatar123/150/150.jpg" alt="Profile Avatar" class="profile-avatar mb-3" id="profileAvatar">
                            <div>
                                <button class="btn btn-light btn-sm" id="changeAvatarBtn">Change Avatar</button>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <h2 id="profileName">User Name</h2>
                            <p id="profileEmail">user@example.com</p>
                            <p id="profileBio">I love being productive!</p>
                            <div class="d-flex align-items-center mt-3">
                                <div class="points-badge me-3" id="profilePoints">0</div>
                                <div>
                                    <h5 class="mb-0">Productivity Points</h5>
                                    <small>Earn points by completing tasks and challenges</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Profile Settings</h5>
                    </div>
                    <div class="card-body">
                        <form id="profileForm">
                            <div class="mb-3">
                                <label for="profileNameInput" class="form-label">Name</label>
                                <input type="text" class="form-control" id="profileNameInput" required>
                            </div>
                            <div class="mb-3">
                                <label for="profileBioInput" class="form-label">Bio</label>
                                <textarea class="form-control" id="profileBioInput" rows="3"></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="profileThemeInput" class="form-label">Theme</label>
                                <select class="form-select" id="profileThemeInput">
                                    <option value="light">Light</option>
                                    <option value="dark">Dark</option>
                                </select>
                            </div>
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="profileNotificationsInput">
                                <label class="form-check-label" for="profileNotificationsInput">
                                    Enable Notifications
                                </label>
                            </div>
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Task Modal -->
    <div class="modal fade" id="addTaskModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Task</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addTaskForm">
                        <div class="mb-3">
                            <label for="taskTitle" class="form-label">Title</label>
                            <input type="text" class="form-control" id="taskTitle" required>
                        </div>
                        <div class="mb-3">
                            <label for="taskDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="taskDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="taskDueDate" class="form-label">Due Date</label>
                            <input type="date" class="form-control" id="taskDueDate">
                        </div>
                        <div class="mb-3">
                            <label for="taskPriority" class="form-label">Priority</label>
                            <select class="form-select" id="taskPriority">
                                <option value="low">Low</option>
                                <option value="medium" selected>Medium</option>
                                <option value="high">High</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="taskPoints" class="form-label">Points</label>
                            <input type="number" class="form-control" id="taskPoints" value="5" min="1" max="20">
                        </div>
                        <button type="submit" class="btn btn-primary">Add Task</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Event Modal -->
    <div class="modal fade" id="addEventModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Event</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addEventForm">
                        <div class="mb-3">
                            <label for="eventTitle" class="form-label">Title</label>
                            <input type="text" class="form-control" id="eventTitle" required>
                        </div>
                        <div class="mb-3">
                            <label for="eventDate" class="form-label">Date</label>
                            <input type="date" class="form-control" id="eventDate" required>
                        </div>
                        <div class="mb-3">
                            <label for="eventTime" class="form-label">Time</label>
                            <input type="time" class="form-control" id="eventTime">
                        </div>
                        <div class="mb-3">
                            <label for="eventDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="eventDescription" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Event</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Habit Modal -->
    <div class="modal fade" id="addHabitModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Habit</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addHabitForm">
                        <div class="mb-3">
                            <label for="habitName" class="form-label">Name</label>
                            <input type="text" class="form-control" id="habitName" required>
                        </div>
                        <div class="mb-3">
                            <label for="habitDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="habitDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="habitFrequency" class="form-label">Frequency</label>
                            <select class="form-select" id="habitFrequency">
                                <option value="daily" selected>Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="habitColor" class="form-label">Color</label>
                            <select class="form-select" id="habitColor">
                                <option value="primary" selected>Blue</option>
                                <option value="success">Green</option>
                                <option value="danger">Red</option>
                                <option value="warning">Yellow</option>
                                <option value="info">Light Blue</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Habit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Goal Modal -->
    <div class="modal fade" id="addGoalModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Goal</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addGoalForm">
                        <div class="mb-3">
                            <label for="goalTitle" class="form-label">Title</label>
                            <input type="text" class="form-control" id="goalTitle" required>
                        </div>
                        <div class="mb-3">
                            <label for="goalDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="goalDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="goalCategory" class="form-label">Category</label>
                            <select class="form-select" id="goalCategory">
                                <option value="personal" selected>Personal</option>
                                <option value="work">Work</option>
                                <option value="health">Health</option>
                                <option value="finance">Finance</option>
                                <option value="learning">Learning</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="goalDeadline" class="form-label">Deadline</label>
                            <input type="date" class="form-control" id="goalDeadline">
                        </div>
                        <div class="mb-3">
                            <label for="goalProgress" class="form-label">Progress (%)</label>
                            <input type="range" class="form-range" id="goalProgress" min="0" max="100" value="0">
                            <div class="text-center" id="goalProgressValue">0%</div>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Goal</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Note Modal -->
    <div class="modal fade" id="addNoteModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Note</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addNoteForm">
                        <div class="mb-3">
                            <label for="noteTitle" class="form-label">Title</label>
                            <input type="text" class="form-control" id="noteTitle" required>
                        </div>
                        <div class="mb-3">
                            <label for="noteCategory" class="form-label">Category</label>
                            <select class="form-select" id="noteCategory">
                                <option value="ideas" selected>Ideas</option>
                                <option value="work">Work</option>
                                <option value="personal">Personal</option>
                                <option value="learning">Learning</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="noteContent" class="form-label">Content</label>
                            <textarea class="form-control" id="noteContent" rows="5" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Note</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Journal Modal -->
    <div class="modal fade" id="addJournalModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Journal Entry</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addJournalForm">
                        <div class="mb-3">
                            <label for="journalMood" class="form-label">Mood</label>
                            <select class="form-select" id="journalMood">
                                <option value="happy" selected>Happy</option>
                                <option value="sad">Sad</option>
                                <option value="angry">Angry</option>
                                <option value="excited">Excited</option>
                                <option value="tired">Tired</option>
                                <option value="motivated">Motivated</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="journalContent" class="form-label">Content</label>
                            <textarea class="form-control" id="journalContent" rows="5" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="journalTags" class="form-label">Tags (comma separated)</label>
                            <input type="text" class="form-control" id="journalTags" placeholder="e.g., work, productive, challenging">
                        </div>
                        <button type="submit" class="btn btn-primary">Add Entry</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // App data structure
        const appData = {
            users: [],
            currentUser: null,
            userData: {
                profile: {
                    name: '',
                    avatar: 'default.png',
                    bio: 'I love being productive!',
                    theme: 'light',
                    notifications: true
                },
                tasks: [],
                calendar_events: [],
                points: 0,
                timer_sessions: [],
                habits: [],
                goals: [],
                notes: [],
                journal_entries: [],
                motivation: {
                    current_streak: 0,
                    longest_streak: 0,
                    total_challenges: 0,
                    last_challenge_date: null,
                    accepted_challenges: []
                },
                settings: {
                    task_default_priority: 'medium',
                    task_default_points: 5,
                    timer_default_duration: 25
                }
            }
        };

        // Motivation quotes
        const MOTIVATION_QUOTES = [
            {"quote": "The secret of getting ahead is getting started.", "author": "Mark Twain"},
            {"quote": "Your time is limited, so don't waste it living someone else's life.", "author": "Steve Jobs"},
            {"quote": "The future belongs to those who believe in the beauty of their dreams.", "author": "Eleanor Roosevelt"},
            {"quote": "It is during our darkest moments that we must focus to see the light.", "author": "Aristotle"},
            {"quote": "Success is not final, failure is not fatal: It is the courage to continue that counts.", "author": "Winston Churchill"},
            {"quote": "The only way to do great work is to love what you do.", "author": "Steve Jobs"},
            {"quote": "Believe you can and you're halfway there.", "author": "Theodore Roosevelt"},
            {"quote": "The only impossible journey is the one you never begin.", "author": "Tony Robbins"},
            {"quote": "In the middle of difficulty lies opportunity.", "author": "Albert Einstein"},
            {"quote": "Success is not how high you have climbed, but how you make a positive difference to the world.", "author": "Roy T. Bennett"}
        ];

        // Productivity tips
        const PRODUCTIVITY_TIPS = [
            "Break your tasks into smaller, manageable parts to make progress easier.",
            "Use the Pomodoro Technique: Work for 25 minutes, then take a 5-minute break.",
            "Prioritize your tasks using the Eisenhower Matrix: Urgent/Important, Important/Not Urgent, etc.",
            "Eliminate distractions by turning off notifications and creating a dedicated workspace.",
            "Set specific, measurable, achievable, relevant, and time-bound (SMART) goals.",
            "Review your tasks at the end of each day and plan for the next day.",
            "Use the two-minute rule: If a task takes less than two minutes, do it immediately.",
            "Take regular breaks to maintain focus and prevent burnout.",
            "Batch similar tasks together to minimize context switching.",
            "Track your time to identify where you're spending it and where you can improve."
        ];

        // Daily challenges
        const DAILY_CHALLENGES = [
            {"title": "Complete 3 tasks", "description": "Focus on completing at least 3 tasks from your list today."},
            {"title": "No social media for 2 hours", "description": "Avoid social media for a continuous 2-hour period today."},
            {"title": "30-minute exercise", "description": "Dedicate at least 30 minutes to physical exercise today."},
            {"title": "Learn something new", "description": "Spend 30 minutes learning a new skill or topic today."},
            {"title": "Drink 8 glasses of water", "description": "Stay hydrated by drinking at least 8 glasses of water today."},
            {"title": "Early to bed", "description": "Go to bed at least 30 minutes earlier than usual tonight."},
            {"title": "Healthy meal", "description": "Prepare and eat a healthy, nutritious meal today."},
            {"title": "Digital detox", "description": "Spend 1 hour without any digital devices today."},
            {"title": "Help someone", "description": "Do something helpful for someone else today without expecting anything in return."},
            {"title": "Plan your week", "description": "Take 30 minutes to plan your upcoming week in detail."}
        ];

        // Resources
        const PRODUCTIVITY_RESOURCES = [
            {
                "title": "The Pomodoro Technique",
                "description": "Learn about this time management method to improve your focus and productivity.",
                "icon": "bi-clock",
                "link": "https://francescocirillo.com/pages/pomodoro-technique"
            },
            {
                "title": "Getting Things Done",
                "description": "A comprehensive time-management method by David Allen.",
                "icon": "bi-check2-square",
                "link": "https://gettingthingsdone.com/"
            },
            {
                "title": "Deep Work",
                "description": "Rules for focused success in a distracted world by Cal Newport.",
                "icon": "bi-book",
                "link": "https://www.calnewport.com/books/deep-work/"
            },
            {
                "title": "Todoist",
                "description": "A to-do list app and task manager that helps you get organized.",
                "icon": "bi-list-task",
                "link": "https://todoist.com/"
            },
            {
                "title": "Forest",
                "description": "Stay focused and be present with this gamified productivity app.",
                "icon": "bi-tree",
                "link": "https://www.forestapp.cc/"
            }
        ];

        // Random tasks
        const RANDOM_TASKS = [
            "Do 10 push-ups ",
            "Drink a glass of water ",
            "Read 5 pages of a book ",
            "Clean your study table ",
            "Take a 2 min stretch break ",
            "Write one positive thought ",
            "Revise 5 English words ",
            "Organize your bag ",
            "Do 15 squats ",
            "Meditate for 2 minutes "
        ];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Load data from localStorage
            loadData();
            
            // Check if user is logged in
            if (appData.currentUser) {
                showApp();
            } else {
                showAuth();
            }
            
            // Setup event listeners
            setupEventListeners();
            
            // Initialize components
            initializeComponents();
        });

        // Load data from localStorage
        function loadData() {
            const savedUsers = localStorage.getItem('productivityAppUsers');
            if (savedUsers) {
                appData.users = JSON.parse(savedUsers);
            }
            
            const savedCurrentUser = localStorage.getItem('productivityAppCurrentUser');
            if (savedCurrentUser) {
                appData.currentUser = JSON.parse(savedCurrentUser);
                
                const savedUserData = localStorage.getItem(`productivityAppUserData_${appData.currentUser.id}`);
                if (savedUserData) {
                    appData.userData = JSON.parse(savedUserData);
                }
            }
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('productivityAppUsers', JSON.stringify(appData.users));
            
            if (appData.currentUser) {
                localStorage.setItem('productivityAppCurrentUser', JSON.stringify(appData.currentUser));
                localStorage.setItem(`productivityAppUserData_${appData.currentUser.id}`, JSON.stringify(appData.userData));
            }
        }

        // Show auth screen
        function showAuth() {
            document.getElementById('authScreen').style.display = 'flex';
            document.getElementById('appScreen').style.display = 'none';
        }

        // Show app screen
        function showApp() {
            document.getElementById('authScreen').style.display = 'none';
            document.getElementById('appScreen').style.display = 'block';
            
            // Update UI with user data
            updateUI();
            
            // Show dashboard by default
            showPage('dashboard');
        }

        // Setup event listeners
        function setupEventListeners() {
            // Auth forms
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('registerForm').addEventListener('submit', handleRegister);
            
            // Navigation
            document.querySelectorAll('.sidebar-menu a[data-page]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('data-page');
                    showPage(page);
                    
                    // Update active menu item
                    document.querySelectorAll('.sidebar-menu a').forEach(item => {
                        item.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            });
            
            // Logout
            document.getElementById('logoutBtn').addEventListener('click', handleLogout);
            
            // Toggle sidebar (mobile)
            document.getElementById('toggleSidebar').addEventListener('click', function() {
                document.getElementById('sidebar').classList.toggle('active');
            });
            
            // Dashboard buttons
            document.getElementById('viewAllTasksBtn').addEventListener('click', function() {
                showPage('tasks');
                document.querySelector('.sidebar-menu a[data-page="tasks"]').click();
            });
            
            document.getElementById('viewAllEventsBtn').addEventListener('click', function() {
                showPage('calendar');
                document.querySelector('.sidebar-menu a[data-page="calendar"]').click();
            });
            
            document.getElementById('newQuoteBtn').addEventListener('click', function() {
                const quote = getRandomQuote();
                document.getElementById('dailyQuote').textContent = `"${quote.quote}" - ${quote.author}`;
            });
            
            document.getElementById('newTipBtn').addEventListener('click', function() {
                const tip = getRandomTip();
                document.getElementById('productivityTip').textContent = tip;
            });
            
            document.getElementById('acceptChallengeBtn').addEventListener('click', acceptChallenge);
            
            // Random task
            document.getElementById('randomTaskBtn').addEventListener('click', showRandomTask);
            document.getElementById('completeRandomTaskBtn').addEventListener('click', completeRandomTask);
            
            // Forms
            document.getElementById('addTaskForm').addEventListener('submit', handleAddTask);
            document.getElementById('addEventForm').addEventListener('submit', handleAddEvent);
            document.getElementById('addHabitForm').addEventListener('submit', handleAddHabit);
            document.getElementById('addGoalForm').addEventListener('submit', handleAddGoal);
            document.getElementById('addNoteForm').addEventListener('submit', handleAddNote);
            document.getElementById('addJournalForm').addEventListener('submit', handleAddJournal);
            document.getElementById('profileForm').addEventListener('submit', handleProfileUpdate);
            
            // Timer
            document.getElementById('startTimerBtn').addEventListener('click', startTimer);
            document.getElementById('pauseTimerBtn').addEventListener('click', pauseTimer);
            document.getElementById('resetTimerBtn').addEventListener('click', resetTimer);
            
            // Goal progress slider
            document.getElementById('goalProgress').addEventListener('input', function() {
                document.getElementById('goalProgressValue').textContent = this.value + '%';
            });
            
            // Motivation page buttons
            document.getElementById('refreshQuotesBtn').addEventListener('click', loadMotivationQuotes);
            document.getElementById('refreshTipsBtn').addEventListener('click', loadProductivityTips);
            document.getElementById('refreshChallengesBtn').addEventListener('click', loadDailyChallenges);
        }

        // Initialize components
        function initializeComponents() {
            // Load today's date as default for date inputs
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('taskDueDate').value = today;
            document.getElementById('eventDate').value = today;
        }

        // Handle login
        function handleLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            // Find user
            const user = appData.users.find(u => u.email === email && u.password === password);
            
            if (user) {
                appData.currentUser = user;
                
                // Load user data
                const savedUserData = localStorage.getItem(`productivityAppUserData_${user.id}`);
                if (savedUserData) {
                    appData.userData = JSON.parse(savedUserData);
                } else {
                    // Initialize with default data
                    appData.userData.profile.name = user.name;
                    saveData();
                }
                
                saveData();
                showApp();
                
                // Show success message
                showToast('Login successful!', 'success');
            } else {
                showToast('Invalid email or password', 'danger');
            }
        }

        // Handle registration
        function handleRegister(e) {
            e.preventDefault();
            
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            // Check if email already exists
            if (appData.users.some(u => u.email === email)) {
                showToast('Email already exists', 'danger');
                return;
            }
            
            // Create new user
            const newUser = {
                id: generateUserId(),
                name,
                email,
                password,
                created_at: new Date().toISOString()
            };
            
            appData.users.push(newUser);
            appData.currentUser = newUser;
            
            // Initialize user data
            appData.userData.profile.name = name;
            
            saveData();
            showApp();
            
            // Show success message
            showToast('Registration successful!', 'success');
        }

        // Handle logout
        function handleLogout() {
            appData.currentUser = null;
            saveData();
            showAuth();
            showToast('You have been logged out', 'info');
        }

        // Generate unique user ID
        function generateUserId() {
            return 'user_' + Math.random().toString(36).substr(2, 9);
        }

        // Generate unique item ID
        function generateItemId() {
            return 'item_' + Math.random().toString(36).substr(2, 9);
        }

        // Show page
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.style.display = 'none';
            });
            
            // Show selected page
            document.getElementById(pageId + 'Page').style.display = 'block';
            
            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'tasks': 'Tasks',
                'calendar': 'Calendar Events',
                'timer': 'Focus Timer',
                'habits': 'Habits',
                'goals': 'Goals',
                'notes': 'Notes',
                'journal': 'Journal',
                'motivation': 'Motivation',
                'resources': 'Resources',
                'profile': 'Profile'
            };
            
            document.getElementById('pageTitle').textContent = titles[pageId] || 'Productivity Master';
            
            // Load page-specific data
            loadPageData(pageId);
        }

        // Load page-specific data
        function loadPageData(pageId) {
            switch(pageId) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'tasks':
                    loadTasks();
                    break;
                case 'calendar':
                    loadEvents();
                    break;
                case 'timer':
                    loadTimerData();
                    break;
                case 'habits':
                    loadHabits();
                    break;
                case 'goals':
                    loadGoals();
                    break;
                case 'notes':
                    loadNotes();
                    break;
                case 'journal':
                    loadJournal();
                    break;
                case 'motivation':
                    loadMotivationData();
                    break;
                case 'resources':
                    loadResources();
                    break;
                case 'profile':
                    loadProfile();
                    break;
            }
        }

        // Update UI with user data
        function updateUI() {
            // Update sidebar
            document.getElementById('sidebarUserName').textContent = appData.userData.profile.name;
            document.getElementById('sidebarUserPoints').textContent = appData.userData.points + ' points';
            document.getElementById('sidebarAvatar').src = `https://picsum.photos/seed/${appData.userData.profile.avatar}/80/80.jpg`;
            
            // Update navbar
            document.getElementById('navbarPoints').textContent = appData.userData.points;
        }

        // Load dashboard data
        function loadDashboardData() {
            // Today's date
            const today = new Date().toISOString().split('T')[0];
            
            // Load today's tasks
            const todayTasks = appData.userData.tasks.filter(task => 
                task.due_date === today && !task.completed
            );
            
            const tasksList = document.getElementById('todayTasksList');
            tasksList.innerHTML = '';
            
            if (todayTasks.length === 0) {
                tasksList.innerHTML = '<p class="text-muted">No tasks for today</p>';
            } else {
                todayTasks.forEach(task => {
                    const taskItem = document.createElement('div');
                    taskItem.className = `task-item priority-${task.priority}`;
                    taskItem.innerHTML = `
                        <div>
                            <div class="fw-bold">${task.title}</div>
                            <small class="text-muted">${task.points} points</small>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-success" onclick="completeTask('${task.id}')">
                                <i class="bi bi-check"></i>
                            </button>
                        </div>
                    `;
                    tasksList.appendChild(taskItem);
                });
            }
            
            // Load today's events
            const todayEvents = appData.userData.calendar_events.filter(event => 
                event.date === today
            );
            
            const eventsList = document.getElementById('todayEventsList');
            eventsList.innerHTML = '';
            
            if (todayEvents.length === 0) {
                eventsList.innerHTML = '<p class="text-muted">No events for today</p>';
            } else {
                todayEvents.forEach(event => {
                    const eventItem = document.createElement('div');
                    eventItem.className = 'event-item';
                    eventItem.innerHTML = `
                        <div>
                            <div class="fw-bold">${event.title}</div>
                            <small class="text-muted">${event.time || 'All day'}</small>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteEvent('${event.id}')">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    `;
                    eventsList.appendChild(eventItem);
                });
            }
            
            // Update streak
            document.getElementById('currentStreak').textContent = appData.userData.motivation.current_streak;
            
            // Load daily quote
            const quote = getRandomQuote();
            document.getElementById('dailyQuote').textContent = `"${quote.quote}" - ${quote.author}`;
            
            // Load daily challenge
            const challenge = getRandomChallenge();
            const challengeContainer = document.getElementById('dailyChallenge');
            challengeContainer.innerHTML = `
                <h5>${challenge.title}</h5>
                <p>${challenge.description}</p>
            `;
            
            // Load productivity tip
            const tip = getRandomTip();
            document.getElementById('productivityTip').textContent = tip;
        }

        // Load tasks
        function loadTasks() {
            const tasksList = document.getElementById('tasksList');
            tasksList.innerHTML = '';
            
            if (appData.userData.tasks.length === 0) {
                tasksList.innerHTML = '<p class="text-muted">No tasks yet. Add your first task!</p>';
            } else {
                appData.userData.tasks.forEach(task => {
                    const taskItem = document.createElement('div');
                    taskItem.className = `task-item priority-${task.priority} ${task.completed ? 'completed-task' : ''}`;
                    taskItem.innerHTML = `
                        <div>
                            <div class="fw-bold">${task.title}</div>
                            <div>${task.description}</div>
                            <small class="text-muted">
                                Due: ${task.due_date || 'No due date'} | 
                                Priority: ${task.priority} | 
                                Points: ${task.points}
                            </small>
                        </div>
                        <div>
                            ${!task.completed ? 
                                `<button class="btn btn-sm btn-success me-1" onclick="completeTask('${task.id}')">
                                    <i class="bi bi-check"></i>
                                </button>` : 
                                `<button class="btn btn-sm btn-outline-secondary me-1" onclick="uncompleteTask('${task.id}')">
                                    <i class="bi bi-arrow-counterclockwise"></i>
                                </button>`
                            }
                            <button class="btn btn-sm btn-outline-primary me-1" onclick="editTask('${task.id}')">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteTask('${task.id}')">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    `;
                    tasksList.appendChild(taskItem);
                });
            }
        }

        // Load events
        function loadEvents() {
            const eventsList = document.getElementById('eventsList');
            eventsList.innerHTML = '';
            
            if (appData.userData.calendar_events.length === 0) {
                eventsList.innerHTML = '<p class="text-muted">No events yet. Add your first event!</p>';
            } else {
                appData.userData.calendar_events.forEach(event => {
                    const eventItem = document.createElement('div');
                    eventItem.className = 'event-item';
                    eventItem.innerHTML = `
                        <div>
                            <div class="fw-bold">${event.title}</div>
                            <div>${event.description}</div>
                            <small class="text-muted">
                                Date: ${event.date} | 
                                Time: ${event.time || 'All day'}
                            </small>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-outline-primary me-1" onclick="editEvent('${event.id}')">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteEvent('${event.id}')">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    `;
                    eventsList.appendChild(eventItem);
                });
            }
        }

        // Load timer data
        function loadTimerData() {
            // Load tasks for timer selection
            const timerTaskSelect = document.getElementById('timerTask');
            timerTaskSelect.innerHTML = '<option value="">No specific task</option>';
            
            appData.userData.tasks
                .filter(task => !task.completed)
                .forEach(task => {
                    const option = document.createElement('option');
                    option.value = task.id;
                    option.textContent = task.title;
                    timerTaskSelect.appendChild(option);
                });
            
            // Load timer sessions
            const sessionsList = document.getElementById('timerSessionsList');
            sessionsList.innerHTML = '';
            
            if (appData.userData.timer_sessions.length === 0) {
                sessionsList.innerHTML = '<p class="text-muted">No timer sessions yet</p>';
            } else {
                appData.userData.timer_sessions.forEach(session => {
                    const sessionItem = document.createElement('div');
                    sessionItem.className = 'task-item';
                    sessionItem.innerHTML = `
                        <div>
                            <div class="fw-bold">${session.name}</div>
                            <small class="text-muted">
                                Duration: ${session.duration} minutes | 
                                Completed: ${new Date(session.completed_at).toLocaleString()}
                            </small>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteTimerSession('${session.id}')">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    `;
                    sessionsList.appendChild(sessionItem);
                });
            }
        }

        // Load habits
        function loadHabits() {
            const habitsList = document.getElementById('habitsList');
            habitsList.innerHTML = '';
            
            if (appData.userData.habits.length === 0) {
                habitsList.innerHTML = '<p class="text-muted">No habits yet. Add your first habit!</p>';
            } else {
                appData.userData.habits.forEach(habit => {
                    const habitItem = document.createElement('div');
                    habitItem.className = 'habit-item';
                    habitItem.innerHTML = `
                        <div>
                            <div class="fw-bold">${habit.name}</div>
                            <div>${habit.description}</div>
                            <small class="text-muted">
                                Frequency: ${habit.frequency} | 
                                Completed: ${habit.completed_dates.length} times
                            </small>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-success me-1" onclick="completeHabit('${habit.id}')">
                                <i class="bi bi-check"></i> Today
                            </button>
                            <button class="btn btn-sm btn-outline-primary me-1" onclick="editHabit('${habit.id}')">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteHabit('${habit.id}')">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    `;
                    habitsList.appendChild(habitItem);
                });
            }
        }

        // Load goals
        function loadGoals() {
            const goalsList = document.getElementById('goalsList');
            goalsList.innerHTML = '';
            
            if (appData.userData.goals.length === 0) {
                goalsList.innerHTML = '<p class="text-muted">No goals yet. Add your first goal!</p>';
            } else {
                appData.userData.goals.forEach(goal => {
                    const goalItem = document.createElement('div');
                    goalItem.className = 'goal-item';
                    goalItem.innerHTML = `
                        <div>
                            <div class="fw-bold">${goal.title}</div>
                            <div>${goal.description}</div>
                            <small class="text-muted">
                                Category: ${goal.category} | 
                                Deadline: ${goal.deadline || 'No deadline'} | 
                                Progress: ${goal.progress}%
                            </small>
                            <div class="progress mt-2">
                                <div class="progress-bar" role="progressbar" style="width: ${goal.progress}%" 
                                    aria-valuenow="${goal.progress}" aria-valuemin="0" aria-valuemax="100">
                                    ${goal.progress}%
                                </div>
                            </div>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-outline-primary me-1" onclick="editGoal('${goal.id}')">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteGoal('${goal.id}')">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    `;
                    goalsList.appendChild(goalItem);
                });
            }
        }

        // Load notes
        function loadNotes() {
            const notesList = document.getElementById('notesList');
            notesList.innerHTML = '';
            
            if (appData.userData.notes.length === 0) {
                notesList.innerHTML = '<p class="text-muted">No notes yet. Add your first note!</p>';
            } else {
                appData.userData.notes.forEach(note => {
                    const noteItem = document.createElement('div');
                    noteItem.className = 'note-item';
                    noteItem.innerHTML = `
                        <div>
                            <div class="fw-bold">${note.title}</div>
                            <div>${note.content.substring(0, 100)}${note.content.length > 100 ? '...' : ''}</div>
                            <small class="text-muted">
                                Category: ${note.category} | 
                                Created: ${new Date(note.created_at).toLocaleString()}
                            </small>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-outline-primary me-1" onclick="viewNote('${note.id}')">
                                <i class="bi bi-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-primary me-1" onclick="editNote('${note.id}')">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteNote('${note.id}')">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    `;
                    notesList.appendChild(noteItem);
                });
            }
        }

        // Load journal
        function loadJournal() {
            const journalList = document.getElementById('journalList');
            journalList.innerHTML = '';
            
            if (appData.userData.journal_entries.length === 0) {
                journalList.innerHTML = '<p class="text-muted">No journal entries yet. Add your first entry!</p>';
            } else {
                // Sort by date (newest first)
                const sortedEntries = [...appData.userData.journal_entries].sort((a, b) => 
                    new Date(b.created_at) - new Date(a.created_at)
                );
                
                sortedEntries.forEach(entry => {
                    const entryItem = document.createElement('div');
                    entryItem.className = 'journal-item';
                    entryItem.innerHTML = `
                        <div>
                            <div class="fw-bold">${new Date(entry.created_at).toLocaleDateString()}</div>
                            <div>Mood: ${entry.mood}</div>
                            <div>${entry.content.substring(0, 100)}${entry.content.length > 100 ? '...' : ''}</div>
                            ${entry.tags.length > 0 ? 
                                `<small class="text-muted">Tags: ${entry.tags.join(', ')}</small>` : 
                                ''
                            }
                        </div>
                        <div>
                            <button class="btn btn-sm btn-outline-primary me-1" onclick="viewJournalEntry('${entry.id}')">
                                <i class="bi bi-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-primary me-1" onclick="editJournalEntry('${entry.id}')">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteJournalEntry('${entry.id}')">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    `;
                    journalList.appendChild(entryItem);
                });
            }
        }

        // Load motivation data
        function loadMotivationData() {
            // Update streak
            document.getElementById('motivationCurrentStreak').textContent = appData.userData.motivation.current_streak;
            document.getElementById('totalChallenges').textContent = appData.userData.motivation.total_challenges;
            document.getElementById('longestStreak').textContent = appData.userData.motivation.longest_streak;
            
            // Load quotes, tips, and challenges
            loadMotivationQuotes();
            loadProductivityTips();
            loadDailyChallenges();
            
            // Load accepted challenges
            const acceptedList = document.getElementById('acceptedChallengesList');
            acceptedList.innerHTML = '';
            
            if (appData.userData.motivation.accepted_challenges.length === 0) {
                acceptedList.innerHTML = '<p class="text-muted">No challenges accepted yet</p>';
            } else {
                appData.userData.motivation.accepted_challenges.forEach(challenge => {
                    const challengeItem = document.createElement('div');
                    challengeItem.className = 'task-item';
                    challengeItem.innerHTML = `
                        <div>
                            <div class="fw-bold">${challenge.title}</div>
                            <div>${challenge.description}</div>
                            <small class="text-muted">Date: ${challenge.date}</small>
                        </div>
                    `;
                    acceptedList.appendChild(challengeItem);
                });
            }
        }

        // Load motivation quotes
        function loadMotivationQuotes() {
            const quotesList = document.getElementById('motivationQuotesList');
            quotesList.innerHTML = '';
            
            // Get 3 random quotes
            const shuffled = [...MOTIVATION_QUOTES].sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, 3);
            
            selected.forEach(quote => {
                const quoteItem = document.createElement('div');
                quoteItem.className = 'quote-card';
                quoteItem.innerHTML = `
                    <p>"${quote.quote}"</p>
                    <p class="text-end">- ${quote.author}</p>
                `;
                quotesList.appendChild(quoteItem);
            });
        }

        // Load productivity tips
        function loadProductivityTips() {
            const tipsList = document.getElementById('productivityTipsList');
            tipsList.innerHTML = '';
            
            // Get 3 random tips
            const shuffled = [...PRODUCTIVITY_TIPS].sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, 3);
            
            selected.forEach(tip => {
                const tipItem = document.createElement('div');
                tipItem.className = 'tip-card';
                tipItem.innerHTML = `<p>${tip}</p>`;
                tipsList.appendChild(tipItem);
            });
        }

        // Load daily challenges
        function loadDailyChallenges() {
            const challengesList = document.getElementById('dailyChallengesList');
            challengesList.innerHTML = '';
            
            // Get 3 random challenges
            const shuffled = [...DAILY_CHALLENGES].sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, 3);
            
            selected.forEach(challenge => {
                const challengeItem = document.createElement('div');
                challengeItem.className = 'challenge-card';
                challengeItem.innerHTML = `
                    <h5>${challenge.title}</h5>
                    <p>${challenge.description}</p>
                `;
                challengesList.appendChild(challengeItem);
            });
        }

        // Load resources
        function loadResources() {
            const resourcesList = document.getElementById('resourcesList');
            resourcesList.innerHTML = '';
            
            PRODUCTIVITY_RESOURCES.forEach(resource => {
                const resourceItem = document.createElement('div');
                resourceItem.className = 'resource-card';
                resourceItem.innerHTML = `
                    <div class="resource-icon">
                        <i class="bi ${resource.icon}"></i>
                    </div>
                    <div>
                        <h5>${resource.title}</h5>
                        <p>${resource.description}</p>
                        <a href="${resource.link}" target="_blank" class="btn btn-sm btn-primary">Visit Resource</a>
                    </div>
                `;
                resourcesList.appendChild(resourceItem);
            });
        }

        // Load profile
        function loadProfile() {
            // Update profile header
            document.getElementById('profileAvatar').src = `https://picsum.photos/seed/${appData.userData.profile.avatar}/150/150.jpg`;
            document.getElementById('profileName').textContent = appData.userData.profile.name;
            document.getElementById('profileEmail').textContent = appData.currentUser.email;
            document.getElementById('profileBio').textContent = appData.userData.profile.bio;
            document.getElementById('profilePoints').textContent = appData.userData.points;
            
            // Update form
            document.getElementById('profileNameInput').value = appData.userData.profile.name;
            document.getElementById('profileBioInput').value = appData.userData.profile.bio;
            document.getElementById('profileThemeInput').value = appData.userData.profile.theme;
            document.getElementById('profileNotificationsInput').checked = appData.userData.profile.notifications;
        }

        // Handle add task
        function handleAddTask(e) {
            e.preventDefault();
            
            const task = {
                id: generateItemId(),
                title: document.getElementById('taskTitle').value,
                description: document.getElementById('taskDescription').value,
                due_date: document.getElementById('taskDueDate').value,
                priority: document.getElementById('taskPriority').value,
                points: parseInt(document.getElementById('taskPoints').value),
                completed: false,
                created_at: new Date().toISOString()
            };
            
            appData.userData.tasks.push(task);
            saveData();
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addTaskModal'));
            modal.hide();
            
            // Reset form
            document.getElementById('addTaskForm').reset();
            document.getElementById('taskDueDate').value = new Date().toISOString().split('T')[0];
            
            // Reload tasks
            loadTasks();
            
            // Show success message
            showToast('Task added successfully!', 'success');
        }

        // Handle add event
        function handleAddEvent(e) {
            e.preventDefault();
            
            const event = {
                id: generateItemId(),
                title: document.getElementById('eventTitle').value,
                date: document.getElementById('eventDate').value,
                time: document.getElementById('eventTime').value,
                description: document.getElementById('eventDescription').value,
                created_at: new Date().toISOString()
            };
            
            appData.userData.calendar_events.push(event);
            saveData();
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addEventModal'));
            modal.hide();
            
            // Reset form
            document.getElementById('addEventForm').reset();
            document.getElementById('eventDate').value = new Date().toISOString().split('T')[0];
            
            // Reload events
            loadEvents();
            
            // Show success message
            showToast('Event added successfully!', 'success');
        }

        // Handle add habit
        function handleAddHabit(e) {
            e.preventDefault();
            
            const habit = {
                id: generateItemId(),
                name: document.getElementById('habitName').value,
                description: document.getElementById('habitDescription').value,
                frequency: document.getElementById('habitFrequency').value,
                color: document.getElementById('habitColor').value,
                completed_dates: [],
                created_at: new Date().toISOString()
            };
            
            appData.userData.habits.push(habit);
            saveData();
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addHabitModal'));
            modal.hide();
            
            // Reset form
            document.getElementById('addHabitForm').reset();
            
            // Reload habits
            loadHabits();
            
            // Show success message
            showToast('Habit added successfully!', 'success');
        }

        // Handle add goal
        function handleAddGoal(e) {
            e.preventDefault();
            
            const goal = {
                id: generateItemId(),
                title: document.getElementById('goalTitle').value,
                description: document.getElementById('goalDescription').value,
                category: document.getElementById('goalCategory').value,
                deadline: document.getElementById('goalDeadline').value,
                progress: parseInt(document.getElementById('goalProgress').value),
                created_at: new Date().toISOString()
            };
            
            appData.userData.goals.push(goal);
            saveData();
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addGoalModal'));
            modal.hide();
            
            // Reset form
            document.getElementById('addGoalForm').reset();
            document.getElementById('goalProgressValue').textContent = '0%';
            
            // Reload goals
            loadGoals();
            
            // Show success message
            showToast('Goal added successfully!', 'success');
        }

        // Handle add note
        function handleAddNote(e) {
            e.preventDefault();
            
            const note = {
                id: generateItemId(),
                title: document.getElementById('noteTitle').value,
                category: document.getElementById('noteCategory').value,
                content: document.getElementById('noteContent').value,
                created_at: new Date().toISOString()
            };
            
            appData.userData.notes.push(note);
            saveData();
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addNoteModal'));
            modal.hide();
            
            // Reset form
            document.getElementById('addNoteForm').reset();
            
            // Reload notes
            loadNotes();
            
            // Show success message
            showToast('Note added successfully!', 'success');
        }

        // Handle add journal
        function handleAddJournal(e) {
            e.preventDefault();
            
            const tags = document.getElementById('journalTags').value
                .split(',')
                .map(tag => tag.trim())
                .filter(tag => tag.length > 0);
            
            const entry = {
                id: generateItemId(),
                mood: document.getElementById('journalMood').value,
                content: document.getElementById('journalContent').value,
                tags: tags,
                created_at: new Date().toISOString()
            };
            
            appData.userData.journal_entries.push(entry);
            saveData();
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addJournalModal'));
            modal.hide();
            
            // Reset form
            document.getElementById('addJournalForm').reset();
            
            // Reload journal
            loadJournal();
            
            // Show success message
            showToast('Journal entry added successfully!', 'success');
        }

        // Handle profile update
        function handleProfileUpdate(e) {
            e.preventDefault();
            
            appData.userData.profile.name = document.getElementById('profileNameInput').value;
            appData.userData.profile.bio = document.getElementById('profileBioInput').value;
            appData.userData.profile.theme = document.getElementById('profileThemeInput').value;
            appData.userData.profile.notifications = document.getElementById('profileNotificationsInput').checked;
            
            // Update user name in users array
            const userIndex = appData.users.findIndex(u => u.id === appData.currentUser.id);
            if (userIndex !== -1) {
                appData.users[userIndex].name = appData.userData.profile.name;
            }
            
            saveData();
            updateUI();
            
            // Show success message
            showToast('Profile updated successfully!', 'success');
        }

        // Complete task
        function completeTask(taskId) {
            const taskIndex = appData.userData.tasks.findIndex(t => t.id === taskId);
            if (taskIndex !== -1) {
                appData.userData.tasks[taskIndex].completed = true;
                appData.userData.tasks[taskIndex].completed_at = new Date().toISOString();
                
                // Add points
                appData.userData.points += appData.userData.tasks[taskIndex].points;
                
                saveData();
                updateUI();
                loadTasks();
                
                // Show success message
                showToast('Task completed! +' + appData.userData.tasks[taskIndex].points + ' points', 'success');
            }
        }

        // Uncomplete task
        function uncompleteTask(taskId) {
            const taskIndex = appData.userData.tasks.findIndex(t => t.id === taskId);
            if (taskIndex !== -1) {
                appData.userData.tasks[taskIndex].completed = false;
                delete appData.userData.tasks[taskIndex].completed_at;
                
                // Remove points
                appData.userData.points = Math.max(0, appData.userData.points - appData.userData.tasks[taskIndex].points);
                
                saveData();
                updateUI();
                loadTasks();
                
                // Show success message
                showToast('Task marked as incomplete', 'info');
            }
        }

        // Delete task
        function deleteTask(taskId) {
            if (confirm('Are you sure you want to delete this task?')) {
                appData.userData.tasks = appData.userData.tasks.filter(t => t.id !== taskId);
                saveData();
                loadTasks();
                
                // Show success message
                showToast('Task deleted', 'info');
            }
        }

        // Delete event
        function deleteEvent(eventId) {
            if (confirm('Are you sure you want to delete this event?')) {
                appData.userData.calendar_events = appData.userData.calendar_events.filter(e => e.id !== eventId);
                saveData();
                loadEvents();
                
                // Show success message
                showToast('Event deleted', 'info');
            }
        }

        // Complete habit
        function completeHabit(habitId) {
            const habitIndex = appData.userData.habits.findIndex(h => h.id === habitId);
            if (habitIndex !== -1) {
                const today = new Date().toISOString().split('T')[0];
                
                // Check if already completed today
                if (appData.userData.habits[habitIndex].completed_dates.includes(today)) {
                    showToast('Habit already completed today', 'warning');
                    return;
                }
                
                appData.userData.habits[habitIndex].completed_dates.push(today);
                
                // Add points
                appData.userData.points += 1;
                
                saveData();
                updateUI();
                loadHabits();
                
                // Show success message
                showToast('Habit completed! +1 point', 'success');
            }
        }

        // Delete habit
        function deleteHabit(habitId) {
            if (confirm('Are you sure you want to delete this habit?')) {
                appData.userData.habits = appData.userData.habits.filter(h => h.id !== habitId);
                saveData();
                loadHabits();
                
                // Show success message
                showToast('Habit deleted', 'info');
            }
        }

        // Delete goal
        function deleteGoal(goalId) {
            if (confirm('Are you sure you want to delete this goal?')) {
                appData.userData.goals = appData.userData.goals.filter(g => g.id !== goalId);
                saveData();
                loadGoals();
                
                // Show success message
                showToast('Goal deleted', 'info');
            }
        }

        // Delete note
        function deleteNote(noteId) {
            if (confirm('Are you sure you want to delete this note?')) {
                appData.userData.notes = appData.userData.notes.filter(n => n.id !== noteId);
                saveData();
                loadNotes();
                
                // Show success message
                showToast('Note deleted', 'info');
            }
        }

        // Delete journal entry
        function deleteJournalEntry(entryId) {
            if (confirm('Are you sure you want to delete this journal entry?')) {
                appData.userData.journal_entries = appData.userData.journal_entries.filter(e => e.id !== entryId);
                saveData();
                loadJournal();
                
                // Show success message
                showToast('Journal entry deleted', 'info');
            }
        }

        // Delete timer session
        function deleteTimerSession(sessionId) {
            if (confirm('Are you sure you want to delete this timer session?')) {
                appData.userData.timer_sessions = appData.userData.timer_sessions.filter(s => s.id !== sessionId);
                
                // Remove points
                appData.userData.points = Math.max(0, appData.userData.points - 2);
                
                saveData();
                updateUI();
                loadTimerData();
                
                // Show success message
                showToast('Timer session deleted', 'info');
            }
        }

        // Timer variables
        let timerInterval;
        let timerSeconds = 25 * 60; // 25 minutes default
        let timerRunning = false;

        // Start timer
        function startTimer() {
            if (!timerRunning) {
                timerRunning = true;
                
                // Get duration from input
                const duration = parseInt(document.getElementById('timerDuration').value);
                timerSeconds = duration * 60;
                
                // Update display
                updateTimerDisplay();
                
                timerInterval = setInterval(() => {
                    timerSeconds--;
                    updateTimerDisplay();
                    
                    if (timerSeconds <= 0) {
                        // Timer completed
                        clearInterval(timerInterval);
                        timerRunning = false;
                        
                        // Add timer session
                        const taskSelect = document.getElementById('timerTask');
                        const selectedTask = taskSelect.value;
                        const taskTitle = selectedTask ? 
                            appData.userData.tasks.find(t => t.id === selectedTask)?.title || 'Unknown Task' : 
                            'Timer Session';
                        
                        const session = {
                            id: generateItemId(),
                            name: taskTitle,
                            duration: duration,
                            task_id: selectedTask || null,
                            completed_at: new Date().toISOString()
                        };
                        
                        appData.userData.timer_sessions.push(session);
                        
                        // Add points
                        appData.userData.points += 2;
                        
                        saveData();
                        updateUI();
                        loadTimerData();
                        
                        // Show completion message
                        showToast('Timer completed! +2 points', 'success');
                        
                        // Play notification sound if enabled
                        if (appData.userData.profile.notifications) {
                            playNotificationSound();
                        }
                    }
                }, 1000);
            }
        }

        // Pause timer
        function pauseTimer() {
            if (timerRunning) {
                clearInterval(timerInterval);
                timerRunning = false;
            }
        }

        // Reset timer
        function resetTimer() {
            clearInterval(timerInterval);
            timerRunning = false;
            
            const duration = parseInt(document.getElementById('timerDuration').value);
            timerSeconds = duration * 60;
            updateTimerDisplay();
        }

        // Update timer display
        function updateTimerDisplay() {
            const minutes = Math.floor(timerSeconds / 60);
            const seconds = timerSeconds % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Play notification sound
        function playNotificationSound() {
            // Create a simple beep sound
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.type = 'sine';
            oscillator.frequency.value = 880; // A5 note
            gainNode.gain.value = 0.3;
            
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        // Accept challenge
        function acceptChallenge() {
            const challengeTitle = document.querySelector('#dailyChallenge h5').textContent;
            const challengeDescription = document.querySelector('#dailyChallenge p').textContent;
            
            const today = new Date().toISOString().split('T')[0];
            const motivation = appData.userData.motivation;
            
            // Check if already accepted a challenge today
            if (motivation.last_challenge_date === today) {
                showToast('Already accepted a challenge today', 'warning');
                return;
            }
            
            // Update streak
            if (motivation.last_challenge_date) {
                const lastDate = new Date(motivation.last_challenge_date);
                const todayDate = new Date(today);
                const diffDays = Math.floor((todayDate - lastDate) / (1000 * 60 * 60 * 24));
                
                if (diffDays === 1) {
                    motivation.current_streak += 1;
                } else if (diffDays > 1) {
                    motivation.current_streak = 1;
                }
            } else {
                motivation.current_streak = 1;
            }
            
            // Update longest streak
            if (motivation.current_streak > motivation.longest_streak) {
                motivation.longest_streak = motivation.current_streak;
            }
            
            // Update total challenges
            motivation.total_challenges += 1;
            
            // Add to accepted challenges
            motivation.accepted_challenges.push({
                title: challengeTitle,
                description: challengeDescription,
                date: today
            });
            
            // Update last challenge date
            motivation.last_challenge_date = today;
            
            // Add points
            appData.userData.points += 3;
            
            saveData();
            updateUI();
            
            // Show success message
            showToast('Challenge accepted! +3 points', 'success');
            
            // Get a new challenge
            const challenge = getRandomChallenge();
            document.querySelector('#dailyChallenge h5').textContent = challenge.title;
            document.querySelector('#dailyChallenge p').textContent = challenge.description;
        }

        // Show random task
        function showRandomTask() {
            const task = RANDOM_TASKS[Math.floor(Math.random() * RANDOM_TASKS.length)];
            document.getElementById('randomTaskText').textContent = task;
            document.getElementById('randomTaskContainer').style.display = 'block';
        }

        // Complete random task
        function completeRandomTask() {
            // Add points
            appData.userData.points += 1;
            
            saveData();
            updateUI();
            
            // Hide random task
            document.getElementById('randomTaskContainer').style.display = 'none';
            
            // Show success message
            showToast('Random task completed! +1 point', 'success');
        }

        // Get random quote
        function getRandomQuote() {
            return MOTIVATION_QUOTES[Math.floor(Math.random() * MOTIVATION_QUOTES.length)];
        }

        // Get random tip
        function getRandomTip() {
            return PRODUCTIVITY_TIPS[Math.floor(Math.random() * PRODUCTIVITY_TIPS.length)];
        }

        // Get random challenge
        function getRandomChallenge() {
            return DAILY_CHALLENGES[Math.floor(Math.random() * DAILY_CHALLENGES.length)];
        }

        // Show toast notification
        function showToast(message, type = 'info') {
            const toastContainer = document.createElement('div');
            toastContainer.className = 'position-fixed bottom-0 end-0 p-3';
            toastContainer.style.zIndex = '1050';
            
            const toastId = 'toast-' + Math.random().toString(36).substr(2, 9);
            
            toastContainer.innerHTML = `
                <div id="${toastId}" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header">
                        <strong class="me-auto">Productivity Master</strong>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        ${message}
                    </div>
                </div>
            `;
            
            document.body.appendChild(toastContainer);
            
            const toastElement = document.getElementById(toastId);
            const toast = new bootstrap.Toast(toastElement, {
                autohide: true,
                delay: 3000
            });
            
            toast.show();
            
            toastElement.addEventListener('hidden.bs.toast', function() {
                toastContainer.remove();
            });
        }

        // Placeholder functions for edit, view operations
        function editTask(taskId) {
            showToast('Edit task functionality would open a modal with pre-filled data', 'info');
        }

        function editEvent(eventId) {
            showToast('Edit event functionality would open a modal with pre-filled data', 'info');
        }

        function editHabit(habitId) {
            showToast('Edit habit functionality would open a modal with pre-filled data', 'info');
        }

        function editGoal(goalId) {
            showToast('Edit goal functionality would open a modal with pre-filled data', 'info');
        }

        function viewNote(noteId) {
            showToast('View note functionality would show the full note content', 'info');
        }

        function editNote(noteId) {
            showToast('Edit note functionality would open a modal with pre-filled data', 'info');
        }

        function viewJournalEntry(entryId) {
            showToast('View journal entry functionality would show the full entry', 'info');
        }

        function editJournalEntry(entryId) {
            showToast('Edit journal entry functionality would open a modal with pre-filled data', 'info');
        }
    </script>
</body>
</html>
